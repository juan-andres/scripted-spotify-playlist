<button id="login-button">Login</button>
<script>
  function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  };

  function login() {
    const clientId = getUrlParameter('client_id');
    const redirectUri = window.location.origin + window.location.pathname + 'callback';
    const spotifyAuthorizeUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${redirectUri}&scope=user-library-read`;
    window.location = spotifyAuthorizeUrl;
  }

  const $loginButton = document.getElementById('login-button');
  $loginButton.addEventListener('click', login);
</script>
